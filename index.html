<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Community Hub</title>
    
    <!-- Tailwind CSS for a clean and responsive utility-first approach -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter for a modern, tech-forward feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Applying custom styles and theme */
        body {
            font-family: 'Inter', sans-serif;
            /* Using a soft, light-orange background */
            background-color: #ff9640; 
        }
        
        /* The twitter widget can sometimes have a default background. 
           This ensures it's transparent to match the card. */
        .twitter-timeline {
            background-color: transparent !important;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- 
      Main Card Element
    -->
    <div class="w-full max-w-lg bg-white rounded-2xl shadow-lg overflow-hidden">
        
        <!-- Card Header -->
        <div class="p-6 text-center border-b border-gray-100">
            <h1 class="text-2xl font-bold text-gray-800">Sign Community Hub üçä</h1>
            <p class="text-gray-500 mt-1">Enter your x username and check account score!</p>
        </div>

        <!-- Naya Search Bar Section -->
        <div class="p-4 border-b border-gray-100">
            <div class="flex items-center space-x-2">
                <input id="username-input" type="text" placeholder="@username dalein..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition">
                <button id="search-button" class="px-5 py-2 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 transition">
                    Search
                </button>
            </div>
        </div>

        <!-- Score aur Timeline Dikhane ke liye Container -->
        <div class="relative">
            <!-- Score Display -->
            <div id="score-container" class="absolute top-0 left-0 right-0 p-3 bg-white/80 backdrop-blur-sm z-10 text-center hidden">
                <h2 class="text-sm font-semibold text-gray-700">
                    Profile Score: 
                    <span id="score-value" class="font-bold text-lg text-orange-600"></span>
                </h2>
                <p id="score-note" class="text-xs text-gray-500">(This score is based on x content engagement)</p>
            </div>

            <!-- Embedded X (formerly Twitter) Timeline -->
            <div id="timeline-container" class="h-[10vh] min-h-[100px] bg-gray-50 flex items-center justify-center"> 
                <!-- Timeline yahan dynamically load hogi -->
                <p class="text-gray-400">Yahan user ki timeline dikhegi...</p>
            </div> 
        </div>

    </div>

    <!-- Official script from X (Twitter) to load the timeline widget -->
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchButton = document.getElementById('search-button');
            const usernameInput = document.getElementById('username-input');
            const timelineContainer = document.getElementById('timeline-container');
            const scoreContainer = document.getElementById('score-container');
            const scoreValue = document.getElementById('score-value');
            const scoreNote = document.getElementById('score-note');

            // Function to load a Twitter timeline
            const loadTimeline = (username) => {
                // Purana content saaf karein
                timelineContainer.innerHTML = '';
                
                // Naya timeline widget banane ke liye Twitter ke factory function ka istemal karein
                window.twttr.ready().then(twttr => {
                    twttr.widgets.createTimeline(
                      {
                        sourceType: 'profile',
                        screenName: username
                      },
                      timelineContainer,
                      {
                        theme: 'light',
                        height: timelineContainer.offsetHeight
                      }
                    ).catch(e => {
                        // Agar user nahi milta hai to error message dikhayein
                        timelineContainer.innerHTML = `<div class="text-center text-red-500 p-8">User "@${username}" nahi mila. Kripya username check karein.</div>`;
                        scoreContainer.classList.add('hidden');
                    });
                });
            };
            
            // Function to calculate and display a consistent mock score
            const displayMockScore = (username) => {
                if (!username) {
                    scoreContainer.classList.add('hidden');
                    return;
                }
                
                // --- MOCK SCORE LOGIC ---
                // Yeh function username se ek consistent number generate karta hai.
                // Yeh asli "live" API nahi hai, lekin yeh har baar same username ke liye same score dega.
                // Asli API integration ke liye ek backend server ki zaroorat hoti hai.
                let hash = 0;
                for (let i = 0; i < username.length; i++) {
                    const char = username.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash |= 0; // Convert to 32bit integer
                }

                // Hash ko 65-98 ke range mein convert karein
                const mockScore = Math.abs(hash % 34) + 65; // (98 - 65 + 1 = 34)
                
                scoreValue.textContent = mockScore + " / 100";
                scoreNote.textContent = `(This score is based on ${username} content engagement.)`;
                scoreContainer.classList.remove('hidden');
            };

            const handleSearch = () => {
                let username = usernameInput.value.trim();
                // Agar user ne '@' lagaya hai to use hata dein
                if (username.startsWith('@')) {
                    username = username.substring(1);
                }

                if (username) {
                    loadTimeline(username);
                    displayMockScore(username);
                } else {
                    // Agar input khali hai, to default state par reset karein
                    timelineContainer.innerHTML = '<p class="text-gray-400 text-center p-8">Search karne ke liye upar username dalein.</p>';
                    scoreContainer.classList.add('hidden');
                }
            };

            // Search button par click event
            searchButton.addEventListener('click', handleSearch);

            // Enter key dabane par bhi search karein
            usernameInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    handleSearch();
                }
            });

            // Page load par default timeline (ethsign) load karein
            loadTimeline('ethsign');
            displayMockScore('ethsign');
        });
    </script>

</body>
</html>

